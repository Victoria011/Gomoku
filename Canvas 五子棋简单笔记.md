# Canvas 五子棋
#学习笔记

canvas 标签用于绘制图像。但canvas 元素本身没有绘制能力，仅仅是图形的容器。必须用脚本（通常js）完成实际绘图任务

stroke() - 描边
fill() - 填充
Canvas 画img 的时候加载图片需要一定时间 drawImage() 应该在加载完后的回调函数中应用
在五子棋绘制中即使图片在棋盘前面被画，还是能盖住棋盘线，这是为什么呢？
因为在回调函数 onload 执行后会立刻执行后面的代码，也就是画棋盘的线，然后图片才加载完 (因为需要一段时间), 解决办法可以是将画线的 for 循环放入回调函数内，即可以将for循环封装成一个函数

## 胜负判断
需要两个数组：赢法数组，每一种赢法的统计数组。
赢法数组：三维，前两维是棋盘的格子 row col，第三位是赢法种类 ( 五个子可以竖着横着斜着连 )
每一种赢法统计数组：一维，计算每种赢法完成度 ( 比如第三种赢法 有五个点 黑棋落下两个 a3 = 2 )

三维数组理解
例如：循环起始
[0][0][0] = true
[0][1][0] = true
[0][2][0] = true
[0][3][0] = true
[0][4][0] = true

可以理解为 第一行从左到右五个点针对第1种赢法 ( count = 0 ) 连续为true可以算赢了。其他赢法是第x种赢法则count = x 对第一种赢法判断没有影响。

![](Canvas%20%E4%BA%94%E5%AD%90%E6%A3%8B%E7%AE%80%E5%8D%95%E7%AC%94%E8%AE%B0/AFDFA488-21B5-40A6-ACF7-17B8430024D2.png)


## 人机下棋
加入计算机AI 需要两个数组，人方和计算机方的分数，这里用变量 myScore 和 computerScore 表示，然后通过每次下子对不同程度的有效赢法进行不同的 score 加分。这里不同程度有效赢法是指，首先下子处是要有赢的可能性的，没有赢的可能性就没有拦截对方 / 帮助己方的意义。其次，不同程度，例如第 k 种赢法，人方有1个子 a[k] = 1和 有两个子对于人方赢的可能性显然是不同的，机器想要阻碍该位置人方赢或者帮助机器赢的紧迫程度也就不同，所以对于不同的 a[k] 进行不同的 score 增减。